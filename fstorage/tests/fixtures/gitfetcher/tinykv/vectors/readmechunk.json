[{"project_url":"https://github.com/talent-plan/tinykv","revision_sha":"cf7ed8da34fea520c7e2f909e23bd5c27414961a","source_file":"README.md","start_line":1,"end_line":109,"text":"# The TinyKV Course\n\nThe TinyKV course builds a key-value storage system with the Raft consensus algorithm. It is inspired by [MIT 6.824](https://pdos.csail.mit.edu/6.824/) and [TiKV Project](https://github.com/tikv/tikv).\n\nAfter completing this course, you will have the knowledge to implement a horizontally scalable, highly available, key-value storage service with distributed transaction support. Also, you will have a better understanding of TiKV architecture and implementation.\n\n## Course Architecture\n\nThe whole project is a skeleton code for a key-value server and a scheduler server at the beginning - you need to finish the core logic step by step:\n\n* [Standalone KV](doc/project1-StandaloneKV.md)\n  * Implement a standalone storage engine.\n  * Implement raw key-value service handlers.\n* [Raft KV](doc/project2-RaftKV.md)\n  * Implement the basic Raft algorithm.\n  * Build a fault-tolerant KV server on top of Raft.\n  * Add the support of Raft log garbage collection and snapshot.\n* [Multi-raft KV](doc/project3-MultiRaftKV.md)\n  * Implement membership change and leadership change to Raft algorithm.\n  * Implement conf change and region split on Raft store.\n  * Implement a basic scheduler.\n* [Transaction](doc/project4-Transaction.md)\n  * Implement the multi-version concurrency control layer.\n  * Implement handlers of `KvGet`, `KvPrewrite`, and `KvCommit` requests.\n  * Implement handlers of `KvScan`, `KvCheckTxnStatus`, `KvBatchRollback`, and `KvResolveLock` requests.\n\n## Code Structure\n\n![overview](doc/imgs/overview.png)\n\nSimilar to the architecture of TiDB + TiKV + PD that separates the storage and computation, TinyKV only focuses on the storage layer of a distributed database system. If you are also interested in the SQL layer, please see [TinySQL](https://github.com/tidb-incubator/tinysql). Besides that, there is a component called TinyScheduler acting as a center control of the whole TinyKV cluster, which collects information from the heartbeats of TinyKV. After that, the TinyScheduler can generate scheduling tasks and distribute the tasks to the TinyKV instances. All of instances are communicated via RPC.\n\nThe whole project is organized into the following directories:\n\n* `kv` contains the implementation of the key-value store.\n* `raft` contains the implementation of the Raft consensus algorithm.\n* `scheduler` contains the implementation of the TinyScheduler, which is responsible for managing TinyKV nodes and generating timestamps.\n* `proto` contains the implementation of all communication between nodes and processes uses Protocol Buffers over gRPC. This package contains the protocol definitions used by TinyKV, and the generated Go code that you can use.\n* `log` contains utility to output log based on level.\n\n## Reading List\n\nWe provide a [reading list](doc/reading_list.md) for the knowledge of distributed storage system. Though not all of them are highly related with this course, they can help you construct the knowledge system in this field.\n\nAlso, you're encouraged to read the overview of TiKV's and PD's design to get a general impression on what you will build:\n\n* TiKV, the design of data storage ([English](https://en.pingcap.com/blog/tidb-internal-data-storage), [Chinese](https://pingcap.com/zh/blog/tidb-internal-1)).\n* PD, the design of scheduling ([English](https://en.pingcap.com/blog/tidb-internal-scheduling), [Chinese](https://pingcap.com/zh/blog/tidb-internal-3)).\n\n## Build TinyKV from Source\n\n### Prerequisites\n\n* `git`: The source code of TinyKV is hosted on GitHub as a git repository. To work with git repository, please [install `git`](https://git-scm.com/downloads).\n* `go`: TinyKV is a Go project. To build TinyKV from source, please [install `go`](https://golang.org/doc/install) with version greater or equal to 1.13.\n\n### Clone\n\nClone the source code to your development machine.\n\n```bash\ngit clone https://github.com/tidb-incubator/tinykv.git\n```\n\n### Build\n\nBuild TinyKV from the source code.\n\n```bash\ncd tinykv\nmake\n```\n\nIt builds the binary of `tinykv-server` and `tinyscheduler-server` to `bin` dir.\n\n## Run TinyKV with TinySQL\n\n1. Get `tinysql-server` follow [its document](https://github.com/tidb-incubator/tinysql#deploy).\n2. Put the binary of `tinyscheduler-server`, `tinykv-server` and `tinysql-server` into a single dir.\n3. Under the binary dir, run the following commands:\n\n```bash\nmkdir -p data\n./tinyscheduler-server\n./tinykv-server -path=data\n./tinysql-server --store=tikv --path=\"127.0.0.1:2379\"\n```\n\nNow you can connect to the database with an official MySQL client:\n\n```bash\nmysql -u root -h 127.0.0.1 -P 4000\n```\n## Autograding and certification\n\nSince Jun 2022, we start using [github classroom](https://github.com/talent-plan/tinysql/blob/course/classroom.md) to accept labs and provide autograding timely. The github classroom invitation is https://classroom.github.com/a/cdlNNrFU. The discussion Wechat/Slack group and the certification after you pass the class is provided in the [tinyKV learning class](https://talentplan.edu.pingcap.com/catalog/info/id:263)\n\n\nAutograding is a workflow which can automatically run test cases and give feedback timely. However there are some limitations in Github classroom, in order to make golang work and run it in our self-hosted machines, **you need to overwrite the workflow generated by Github classroom and commit it**.\n\n```sh\ncp scripts/classroom.yml .github/workflows/classroom.yml\ngit add .github\ngit commit -m\"update github classroom workflow\"\n```\n\n## Contributing\n\nAny feedback and contribution is greatly appreciated. Please see [issues](https://github.com/tidb-incubator/tinykv/issues) if you want to join in the development.","embedding_id":"60fece08-3ad5-5c0d-a9d4-6855f8c710f1","token_count":736,"chunk_order":0,"created_at":"2025-05-03T04:44:59Z"}]